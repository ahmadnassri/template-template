name: push

on:
  - push
  - workflow_dispatch

concurrency:
  group: ${{ github.ref }}-${{ github.workflow }}

permissions: read-all

jobs:
  metadata:
    uses: ahmadnassri/actions/.github/workflows/metadata.yml@master

  lint-commits:
    uses: ahmadnassri/actions/.github/workflows/lint-commits.yml@master

  lint-javascript:
    uses: ahmadnassri/actions/.github/workflows/lint-javascript.yml@master

  template-sync:
    needs:
      - metadata
      - lint-commits
      - lint-javascript

    secrets: inherit

    uses: ahmadnassri/actions/.github/workflows/template-sync.yml@master
    with:
      repository_is_template: ${{ needs.metadata.outputs.repository_is_template }}
      repository_default_branch: ${{ needs.metadata.outputs.repository_default_branch }}
